# RabbitMQ CloudPirates - Configurazione Semplificata per OpenK9

## Immagine RabbitMQ
image:
  registry: docker.io
  repository: rabbitmq
  tag: "4.1.4-management"
  imagePullPolicy: IfNotPresent

## Deployment
replicaCount: 1

## Service
service:
  type: ClusterIP
  amqpPort: 5672
  managementPort: 15672

## Autenticazione - USA SECRET
auth:
  existingSecret: "rabbitmq-password"
  existingSecretUsernameKey: "rabbitmq-username"
  existingSecretPasswordKey: "rabbitmq-password"
  existingSecretErlangCookieKey: "erlang-cookie"

## Configurazione
config:
  ## Configurazione RabbitMQ personalizzata
  configuration: |
    ## Management plugin
    management.tcp.port = 15672

    ## AMQP port
    listeners.tcp.default = 5672

    ## Logging
    log.console = true
    log.console.level = info

    ## Memory settings
    vm_memory_high_watermark.relative = 0.6

## Risorse
resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 1024Mi

## Storage
persistence:
  enabled: true
  storageClass: "ibmc-vpc-block-general-purpose"
  size: 8Gi
  accessModes:
  - ReadWriteOnce

## Management UI
management:
  enabled: true

## Plugins
plugins:
- rabbitmq_management
- rabbitmq_prometheus

## Clustering (disabilitato per semplicit√†)
clustering:
  enabled: false

## Ingress - DISABILITATO (non serve)
ingress:
  enabled: false

## TLS - DISABILITATO (non serve)
tls:
  enabled: false

## Metrics
metrics:
  enabled: false
  serviceMonitor:
    enabled: false

## Security Context
podSecurityContext:
  enabled: true
  fsGroup: 1001

securityContext:
  enabled: true
  runAsNonRoot: true
  runAsUser: 1001

## Node Selector (opzionale)
nodeSelector: {}

## Tolerations (opzionale)
tolerations: []

## Affinity (opzionale)
affinity: {}
